// prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL") // used locally or for scripts; safe to keep
}

model organization {
  id     String  @id @default(uuid())
  name   String
  sensor sensor[]
  @@map("organization") // table name in DB
}

model sensor {
  id          String   @id @default(uuid())
  orgId       String   @map("org_id")
  sensorName  String   @map("sensor_name")
  status      String
  temperature Float?
  humidity    Float?
  battery     Float?
  ts          DateTime @default(now())

  organization organization @relation(fields: [orgId], references: [id], onDelete: Cascade)

  @@index([orgId, ts])
  @@map("sensor") // table name in DB
}
